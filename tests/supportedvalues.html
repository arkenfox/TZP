<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>supportedvaluesof</title>
<style>
</style>
</head>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=600">
	<title>supported values</title>
	<link rel="stylesheet" type="text/css" href="testindex.css">
	<script src="testglobals.js"></script>
	<script src="testgeneric.js"></script>
	<!-- custom -->
	<style>
		table {width: 580px;}
		hr {color: #dcdc8c}
	</style>
</head>
<body>

	<table>
	<tr><td><h2>TorZillaPrint</h2></td></tr>
	<tr><td class="blurb"><a class="return" href="../index.html">return to TZP index</a></td></tr>
	</table>

	<table id="tb4">
		<col width="20%"><col width="20%"><col width="60%">
		<thead><tr><th colspan="3">
			<div class="nav-title">supportedvaluesof
			<div class="nav-up"><span class="c perf" id="perf"></span></div>
			</div>
		</th></tr></thead>
		<tr><td colspan="3" class="intro">
			<span class="no_color">Return supported values for each parameter</span>
		</td></tr>
		<tr><td colspan="3"><hr><br></td></tr>
		<tr><td colspan="2">hash</td><td class="mono spaces" id="hashAll"></td></tr>
		<tr><td colspan="2">calendar</td><td class="mono spaces" id="calendar"></td></tr>
		<tr><td colspan="2">collation</td><td class="mono spaces" id="collation"></td></tr>
		<tr><td colspan="2">currency</td><td class="mono spaces" id="currency"></td></tr>
		<tr><td colspan="2">numberingSystem</td><td class="mono spaces" id="numberingSystem"></td></tr>
		<tr><td colspan="2">timeZone</td><td class="mono spaces" id="timeZone"></td></tr>
		<tr><td colspan="2">unit</td><td class="mono spaces" id="unit"></td></tr>
		<tr><td colspan="3"><br><hr><br></td></tr>
		<tr><td id="detailslabel">click counts</td><td colspan="2" class="mono spaces" id="details">to list their results here</td></tr>
	</table>
	<br>

<script>
'use strict';

s4 = s4.trim()
s12 = s12.trim()
s14 = s14.trim()
s16 = s16.trim()
sg = sg.trim()
sb = sb.trim()

let oData = {}

function display(item) {
	dom.detailslabel = item
	if (item == "timeZone") {
		dom.details.innerHTML = oData[item].join("<br>")
	} else {
		dom.details.innerHTML = oData[item].join(", ")
	}
}

function run() {
	let t0 = performance.now()
	// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/supportedValuesOf
	try {
		let res = []
		let list = ["calendar","collation","currency","numberingSystem","timeZone","unit"]
		list.forEach(function(item) {
			let array = Intl.supportedValuesOf(item)
			let el = document.getElementById(item)
			let hash = mini(array)
			el.innerHTML = hash + " <span class='btn4 btnc' onclick='display(`" + item + "`)'>[" + array.length +"]</span>"
			res.push(item +": "+ hash)
			oData[item] = array
		})
		// overall hash
		let hash = mini(res), code = ""

		if (isFF) {
			if (hash == "e4746fcc") {code = "109+"
				// 1792775 ?
				// collation drops reformed
				// numberingsystem adds khmr + nagm
			} else if (hash == "29fb6e2f") {code = "108+"
				// 1630920: collation: big5han, gb2312 removed
				// 1799859: units: microsecond, nanosecond added
			} else if (hash == "2cd0417d") {code = "105-107 | ESR102" // 1786025: backported to ESR102.3 : Europe/Kirov -> Europe/Kyiv
			} else if (hash == "a3f9766a") {code = "101-104"
			} else if (hash == "c55e582a") {code = "96-100"
			} else if (hash == "bba1f34f") {code = "94-95"
			} else if (hash == "51fdba27") {code = "93"
			} else {code = zNEW
			}
			if (code !== zNEW) {code = s14 +" [FF"+ code +"]"+ sc}
		}
		dom.hashAll.innerHTML = hash + code
		dom.perf.innerHTML = Math.round(performance.now() - t0) +" ms"
	} catch (e) {
		dom.details = ""
		dom.detailslabel = e.name
		dom.details = e.message
	}
}

Promise.all([
	get_globals()
]).then(function(){
	run()
})

</script>
</body>
</html>
